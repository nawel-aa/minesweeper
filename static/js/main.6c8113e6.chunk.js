(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(4),i=n.n(s),o=(n(10),n(2)),l={tiles:81,mines:10,rows:9},u={tiles:256,mines:40,rows:16},d={tiles:480,mines:99,rows:16},j=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(0),j=Object(o.a)(i,2),h=j[0],b=j[1],m=Object(a.useState)(0),f=Object(o.a)(m,2),O=f[0],v=f[1],p=e.setGrid,g=e.setStateOfTheGame,x=e.setMines,w=e.initGrid;Object(a.useEffect)((function(){p(w(l)),x(l.mines),s("beginner")}),[]);var S=function(e){var t=e.target.value;s(t);var n=document.querySelector(".custom-size");"custom"===t?n.classList.remove("hidden"):n.classList.add("hidden")},k=function(e){var t=e.target.name,n=document.querySelector(".error-".concat(t)),c=parseInt(e.target.value);c>2?(n.classList.add("hidden"),"height"===t?b(c):v(c)):(n.classList.remove("hidden"),n.textContent="Must be a number greater than 2")};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Level"}),Object(c.jsxs)("form",{onSubmit:function(e){switch(e.preventDefault(),g("notStarted"),r){case"custom":h>3&&O>3&&(p(w({tiles:O*h,mines:Math.floor(O*h*.15),rows:h})),x(Math.floor(O*h*.15)));break;case"intermediate":p(w(u)),x(u.mines);break;case"expert":p(w(d)),x(d.mines);break;default:p(w(l)),x(l.mines)}},children:[Object(c.jsx)("input",{type:"radio",name:"level",value:"beginner",id:"beginner",checked:"beginner"===r,onChange:S}),Object(c.jsx)("label",{htmlFor:"beginner",children:"Beginner"}),Object(c.jsx)("input",{type:"radio",name:"level",value:"intermediate",id:"intermediate",checked:"intermediate"===r,onChange:S}),Object(c.jsx)("label",{htmlFor:"intermediate",children:"Intermediate"}),Object(c.jsx)("input",{type:"radio",name:"level",value:"expert",id:"expert",checked:"expert"===r,onChange:S}),Object(c.jsx)("label",{htmlFor:"expert",children:"Expert"}),Object(c.jsx)("input",{type:"radio",name:"level",value:"custom",id:"custom",checked:"custom"===r,onChange:S}),Object(c.jsx)("label",{htmlFor:"custom",children:"Custom"}),Object(c.jsxs)("div",{className:"custom-size hidden",children:[Object(c.jsx)("label",{htmlFor:"width",children:"Width"}),Object(c.jsx)("input",{type:"number",id:"width",name:"width",onBlur:k}),Object(c.jsx)("p",{className:"error-width hidden"}),Object(c.jsx)("label",{htmlFor:"height",children:"Height"}),Object(c.jsx)("input",{type:"number",id:"height",name:"height",onBlur:k}),Object(c.jsx)("p",{className:"error-height hidden"})]}),Object(c.jsx)("button",{children:"New game"})]})]})},h=function(e){var t=e.mines,n=e.stateOfTheGame,r=Object(a.useState)("\ud83d\ude34"),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(a.useState)(null),d=Object(o.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)("00:00"),m=Object(o.a)(b,2),f=m[0],O=m[1],v=Object(a.useState)(null),p=Object(o.a)(v,2),g=p[0],x=p[1],w=Object(a.useRef)(!0);return Object(a.useEffect)((function(){switch(n){case"running":l("\ud83d\ude42"),h(Date.now);break;case"won":l("\ud83d\ude0e"),clearInterval(g);break;case"lost":l("\ud83d\ude16"),clearInterval(g);break;default:l("\ud83d\ude34"),O("00:00")}return clearInterval(g)}),[n]),Object(a.useEffect)((function(){w.current?w.current=!1:x(setInterval((function(){var e=Date.now()-j;O(new Date(e).toISOString().substring(14,19))}),1e3))}),[j]),Object(c.jsxs)("div",{className:"dashboard",children:[Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:t})}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:i})}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:f})})]})},b=function(e,t,n){var c=document.querySelector('[data-coord="'.concat(t,"-").concat(n,'"]'));c&&c.classList.contains("open")||(e[t][n]>0&&(c.className="open",c.textContent=e[t][n]),0===e[t][n]&&(c.className="open",m(e,t,n)))},m=function(e,t,n){b(e,t,n+1),b(e,t,n-1),t>0&&(b(e,t-1,n),b(e,t-1,n+1),b(e,t-1,n-1)),t<e.length-1&&(b(e,t+1,n),b(e,t+1,n+1),b(e,t+1,n-1))},f=function(e){var t=e.stateOfTheGame,n=e.setStateOfTheGame,r=e.grid,s=e.countMinesNextToTiles,i=e.setGrid,o=e.firstClickMine,l=e.setFirstClickMine,u=function(e){if("won"!==t&&"lost"!==t){var c=e.target,a=parseInt(c.dataset.row),o=parseInt(c.dataset.col),u=r[a][o];if("notStarted"===t&&(n("running"),"X"===u)){var d=function(e,t,n){for(var c=0,a="X",r=e;"X"===a;){var s=r[c].findIndex((function(e){return 0===e}));-1!==s&&(a=0,r[t][n]=0,r[c][s]="X"),c+=1}return r}(r,a,o);return i(s(d)),void l({row:a,col:o})}"X"===u?(n("lost"),function(e){var t=[];e.forEach((function(e,n){e.forEach((function(e,c){var a=document.querySelector('[data-coord="'.concat(n,"-").concat(c,'"]'));"X"===e?t.push(a):a.className.includes("flagged")&&(a.className="open wrong-flag")}))})),t.forEach((function(e){e.className="open mine"}))}(r),c.classList.add("mine-clicked")):0===u?(c.className="open",m(r,a,o)):(c.className="open",c.textContent=u),function(e){return Array.from(document.querySelectorAll(".unopen")).every((function(t){var n=parseInt(t.dataset.row),c=parseInt(t.dataset.col);return"X"===e[n][c]}))}(r)&&n("won")}},d=function(e){if(e.preventDefault(),"lost"!==t&&"won"!==t){"notStarted"===t&&n("running");var c=e.target;c.classList.contains("open")||(c.classList.contains("flagged")?(c.classList.remove("flagged"),c.classList.add("question")):c.classList.contains("question")?c.classList.remove("question"):c.classList.add("flagged"))}};return Object(a.useEffect)((function(){o&&b(r,o.row,o.col)}),[o]),Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:e.grid.map((function(e,t){return Object(c.jsx)("tr",{children:e.map((function(e,n){return Object(c.jsx)("td",{"data-row":t,"data-col":n,"data-coord":"".concat(t,"-").concat(n),className:"unopen",onClick:u,onContextMenu:d},"".concat(t,"-").concat(n))}))},"".concat(t,"-").concat(e))}))})})},O=function(e){return e.map((function(t,n){return t.map((function(c,a){if("X"!==c){var r=0;return"X"===t[a+1]&&(r+=1),"X"===t[a-1]&&(r+=1),n>0&&("X"===e[n-1][a]&&(r+=1),void 0!==e[n+1]&&"X"===e[n-1][a+1]&&(r+=1),a>0&&"X"===e[n-1][a-1]&&(r+=1)),n<e.length-1&&("X"===e[n+1][a]&&(r+=1),"X"===e[n+1][a+1]&&(r+=1),a>0&&"X"===e[n+1][a-1]&&(r+=1)),r}return"X"}))}))},v=function(e){for(var t=e.tiles,n=e.mines,c=e.rows,a=[],r=0;r<t-n;r+=1)a.push(0);for(var s=0;s<n;s+=1)a.push("X");!function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n-=1;var c=[e[t],e[n]];e[n]=c[0],e[t]=c[1]}}(a);for(var i=[],o=a.length/c,l=1;l<=c;l+=1){var u=l*o,d=(l-1)*o;i.push(a.slice(d,u))}return O(i)},p=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)("notStarted"),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(0),b=Object(o.a)(d,2),m=b[0],p=b[1],g=Object(a.useState)(null),x=Object(o.a)(g,2),w=x[0],S=x[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Minesweeper"}),Object(c.jsx)(j,{setGrid:r,setStateOfTheGame:u,stateOfTheGame:l,setMines:p,initGrid:v}),Object(c.jsxs)("div",{className:"game",children:[Object(c.jsx)(h,{stateOfTheGame:l,mines:m}),Object(c.jsx)(f,{grid:n,setStateOfTheGame:u,stateOfTheGame:l,countMinesNextToTiles:O,setGrid:r,firstClickMine:w,setFirstClickMine:S})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,12)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),g()}},[[11,1,2]]]);
//# sourceMappingURL=main.6c8113e6.chunk.js.map